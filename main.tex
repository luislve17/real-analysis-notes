\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{cleveref}
\usepackage[english]{babel}
\usepackage[a4paper, left=0.85in,top=4cm,right=0.85in,bottom=2in]{geometry}
\usepackage{graphicx}
\usepackage{needspace}
\usepackage{tcolorbox}
\usepackage{tikz}
\usepackage{environ}

% ============================================
% STYLE OPTION 1: Classic Palatino
% ============================================
% \usepackage{mathpazo} % Palatino font
% \linespread{1.05} % Slightly more spacing

% ============================================
% PROFESSIONAL COLOR SCHEME
% ============================================
\definecolor{exampleshade}{RGB}{245,245,250}   % Very light blue-gray
\definecolor{accentline}{RGB}{180,180,180}     % Light gray for lines

\tcbuselibrary{skins,breakable}

\author{Luis Vasquez}
\title{Real Analysis - A Self-Taught Approach}

% Counter for theorems
\newcounter{theorem}[section]
\newcounter{definition}[section]
\newcounter{axiom}[section]
\newcounter{proposition}[section]
\newcounter{corollary}[section]
\newcounter{example}[section]

% Format counters
\renewcommand{\thetheorem}{\thesection.\arabic{theorem}}
\renewcommand{\thedefinition}{\thesection.\arabic{definition}}
\renewcommand{\theaxiom}{\thesection.\arabic{axiom}}
\renewcommand{\theproposition}{\thesection.\arabic{proposition}}
\renewcommand{\thecorollary}{\thesection.\arabic{corollary}}
\renewcommand{\theexample}{\thesection.\arabic{example}}

% ============================================
% PROFESSIONAL SECTION STYLING
% ============================================
\usepackage{titlesec}
\setlength{\parskip}{0.5em}
\setlength{\parindent}{1em}  % Or 0pt for no indent with spacing

% Professional page headers (add fancyhdr package)
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\nouppercase{\rightmark}}
\fancyhead[RE]{\nouppercase{\leftmark}}
\renewcommand{\headrulewidth}{0.4pt}

% ============================================
% MAIN THEOREM BOX COMMAND (ALWAYS LEFT SIDE)
% ============================================
\newcommand{\sidetheorembox}[4]{%
  % #1 = counter name
  % #2 = display name
  % #3 = optional title
  % #4 = content
  \refstepcounter{#1}%
  \par\vspace{0.5\baselineskip}%
  \noindent%
  \needspace{5\baselineskip}%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    break at=-5cm/0pt,
    frame hidden,
    colback=white,
    left=0pt,
    right=0pt,
    top=3pt,
    bottom=3pt,
    boxsep=0pt,
    arc=0pt,
    outer arc=0pt,
    boxrule=0pt,
    leftrule=0pt,
    rightrule=0pt,
    width=\textwidth,
    before skip=10pt,
    after skip=10pt
  ]
  \begin{minipage}[t]{0.17\textwidth}
    \raggedleft
    {\bfseries\scshape#2}\\[2pt]
    {#3\csname the#1\endcsname}
  \end{minipage}%
  \hspace{0.015\textwidth}%
  {\color{accentline}\vrule width 0.5pt}%
  \hspace{0.015\textwidth}%
  \begin{minipage}[t]{0.78\textwidth}
    #4
  \end{minipage}
  \end{tcolorbox}
  \par\vspace{0.5\baselineskip}%
}

% ============================================
% THEOREM ENVIRONMENTS WITH TOC SUPPORT
% ============================================
\NewEnviron{theorem}[1][]{%
  \sidetheorembox{theorem}{Theorem}{\ifx\relax#1\relax\else#1\\\fi}{\BODY}%
  \ifx\relax#1\relax\else%
    \addcontentsline{toc}{subsubsection}{\protect\numberline{\thetheorem}#1}%
  \fi%
}

\NewEnviron{definition}[1][]{%
  \sidetheorembox{definition}{Definition}{\ifx\relax#1\relax\else#1\\\fi}{\BODY}%
  \ifx\relax#1\relax\else%
    \addcontentsline{toc}{subsubsection}{\protect\numberline{\thedefinition}#1}%
  \fi%
}

\NewEnviron{axiom}[1][]{%
  \sidetheorembox{axiom}{Axiom}{\ifx\relax#1\relax\else#1\\\fi}{\BODY}%
  \ifx\relax#1\relax\else%
    \addcontentsline{toc}{subsubsection}{\protect\numberline{\theaxiom}#1}%
  \fi%
}

\NewEnviron{proposition}[1][]{%
  \sidetheorembox{proposition}{Proposition}{\ifx\relax#1\relax\else#1\\\fi}{\BODY}%
  \ifx\relax#1\relax\else%
    \addcontentsline{toc}{subsubsection}{\protect\numberline{\theproposition}#1}%
  \fi%
}

\NewEnviron{corollary}[1][]{%
  \sidetheorembox{corollary}{Corollary}{\ifx\relax#1\relax\else#1\\\fi}{\BODY}%
  \ifx\relax#1\relax\else%
    \addcontentsline{toc}{subsubsection}{\protect\numberline{\thecorollary}#1}%
  \fi%
}

\NewEnviron{example}[1][]{%
  \refstepcounter{example}%
  \par\vspace{0.5\baselineskip}%
  \noindent%
  \needspace{5\baselineskip}%
  \begin{tcolorbox}[
    enhanced,
    breakable,
    break at=-5cm/0pt,
    frame hidden,
    colback=exampleshade,
    left=0pt,
    right=0pt,
    top=8pt,
    bottom=8pt,
    boxsep=0pt,
    arc=0pt,
    outer arc=0pt,
    boxrule=0pt,
    width=\textwidth,
    before skip=10pt,
    after skip=10pt
  ]
  \begin{minipage}[t]{0.17\textwidth}
    \raggedleft
    {\bfseries\scshape Example}\\[2pt]
    {\ifx\relax#1\relax\else#1\\\fi\theexample}
  \end{minipage}%
  \hspace{0.015\textwidth}%
  {\color{accentline}\vrule width 0.5pt}%
  \hspace{0.015\textwidth}%
  \begin{minipage}[t]{0.78\textwidth}
    \BODY
  \end{minipage}
  \end{tcolorbox}%
  \ifx\relax#1\relax\else%
    \addcontentsline{toc}{subsubsection}{\protect\numberline{\theexample}#1}%
  \fi%
  \par\vspace{0.5\baselineskip}%
}

% ============================================
% PROOF ENVIRONMENT (ALWAYS LEFT SIDE)
% ============================================
\NewEnviron{bookproof}[1][Proof]{%
  \par\vspace{0.5\baselineskip}%
  \noindent%
  \needspace{8\baselineskip}%
  \noindent\begin{minipage}[t]{0.17\textwidth}
    \raggedleft
    {\bfseries\scshape#1}
  \end{minipage}%
  \hspace{0.015\textwidth}%
  {\color{accentline}\vrule width 0.5pt}%
  \hspace{0.015\textwidth}%
  \begin{minipage}[t]{0.78\textwidth}
    \BODY\hfill$\square$
  \end{minipage}%
  \par\vspace{0.5\baselineskip}%
}

\crefname{theorem}{Theorem}{Theorems}
\crefname{definition}{Definition}{Definitions}
\crefname{axiom}{Axiom}{Axioms}
\crefname{proposition}{Proposition}{Propositions}
\crefname{corollary}{Corollary}{Corollaries}
\crefname{example}{Example}{Examples}

\begin{document}
	\begin{titlepage}
	    \newgeometry{left=0cm,top=0cm,right=0cm,bottom=0cm}
	    \thispagestyle{empty}
	    \centering
	    \includegraphics[width=\paperwidth,height=\paperheight]{assets/cover.png}
	    \restoregeometry
	\end{titlepage}

	\begin{center}
		{\Huge \textbf{REAL ANALYSIS}} \\
		\vspace{16pt}
		{\Large{A Self-Taught Approach}} \\
		\vspace{15cm}
		{\Large{Luis Vasquez}}
	\end{center}
	\newpage

	\tableofcontents
	\newpage

	\input{chapters/chapter_1/main.tex}
	\input{chapters/chapter_2/main.tex}
	\input{chapters/chapter_3/main.tex}
\end{document}
